<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css"
    integrity="sha512-GQGU0fMMi238uA+a/bdWJfpUGKUkBdgfFdgBm72SUQ6BeyWjoY/ton0tEjH+OSH9iP4Dfh+7HM0I9f5eR0L/4w=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />

<!-- CAGR Calculator Container -->
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="box">
                <div class="box-body">
                    <!-- Input Form -->
                    <div class="mb-3">
                        <label for="initialInvestment" class="form-label">Initial Investment ($):</label>
                        <input type="number" class="form-control" id="initialInvestment" oninput="checkAndCalculateCAGR()">
                    </div>
                    
                    <div class="mb-3">
                        <label for="finalInvestment" class="form-label">Final Investment ($):</label>
                        <input type="number" class="form-control" id="finalInvestment" oninput="checkAndCalculateCAGR()">
                    </div>
                    
                    <div class="mb-3">
                        <label for="investmentYears" class="form-label">Investment Years:</label>
                        <input type="number" class="form-control" id="investmentYears" oninput="checkAndCalculateCAGR()">
                    </div>

                    <!-- Results Display -->
                    <div class="mt-4">
                        <h4>CAGR Result:</h4>
                        <p id="cagrResult">---</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- CAGR Calculator Script -->
<script>

    function checkAndCalculateCAGR() {
        const initialInvestment = parseFloat(document.getElementById('initialInvestment').value) || 0;
        const finalInvestment = parseFloat(document.getElementById('finalInvestment').value) || 0;
        const investmentYears = parseFloat(document.getElementById('investmentYears').value) || 0;

        if (initialInvestment > 0 && finalInvestment >= initialInvestment && investmentYears > 0) {
            // Trigger calculation only when all parameters meet the conditions
            calculateCAGR();
        } else {
            // Display '---' if parameters do not meet the conditions
            document.getElementById('cagrResult').innerText = '---';
        }
    }

    function calculateCAGR() {
        const initialInvestment = parseFloat(document.getElementById('initialInvestment').value) || 0;
        const finalInvestment = parseFloat(document.getElementById('finalInvestment').value) || 0;
        const investmentYears = parseFloat(document.getElementById('investmentYears').value) || 0;

        const cagr = calculateCAGRFormula(initialInvestment, finalInvestment, investmentYears)

        document.getElementById('cagrResult').innerText =  `${cagr.toFixed(2)}%`;
    }

    function calculateCAGRFormula(initial, final, years) {
        // CAGR formula: [(Final Value / Initial Value) ^ (1 / Number of Years)] - 1
        return ((final / initial) ** (1 / years) - 1) * 100;
    }

    function resetInputs() {
        document.getElementById('initialInvestment').value = '';
        document.getElementById('finalInvestment').value = '';
        document.getElementById('investmentYears').value = '';
        document.getElementById('cagrResult').innerText = '---';
    }
</script>
    
<style>
    /* 外部样式 */
    body {
        background: var(--ast-global-color-2);
        color: var(--ast-global-color-4);
    }

    .card-body {
        background: var(--ast-global-color-2);
    }

    .box input,
    .box input:focus,
    .box input:hover,
    .box select {
        background: var(--ast-global-color-2);
        color: var(--ast-global-color-3);
        border-color: var(--ast-global-color-1);
    }

    .box {
        position: relative;
        display: flex;
        flex-direction: column;
        min-width: 0;
        word-wrap: break-word;
        /* background-color: #fff; */
        background-clip: border-box;
        border: 1px solid var(--ast-global-color-1);
        border-radius: 6px;
    }

    .box-body {
        flex: 1 1 auto;
        padding: 1rem 1rem;
    }
</style>

<style>
    :root {
        --ast-global-color-0: #16202a;
        --ast-global-color-1: #4a4a4a;
        --ast-global-color-2: #24292e;
        --ast-global-color-3: #fdffff;
        --ast-global-color-4: #fdffff;
        --ast-global-color-5: #FFFFFF;
        --ast-global-color-6: #3087cd;
        --ast-global-color-7: #111111;
        --ast-global-color-8: #111111;
    }
</style>